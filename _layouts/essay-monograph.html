---
# Monograph-style essay layout
# Alternative to essay-content.html with book-inspired design
layout: default
gallery: true
---

{%- assign all_essays = site.essay | sort: 'order' -%}
{%- assign current_index = 0 -%}
{%- for essay in all_essays -%}
  {%- if essay.url == page.url -%}
    {%- assign current_index = forloop.index0 -%}
  {%- endif -%}
{%- endfor -%}
{%- assign prev_index = current_index | minus: 1 -%}
{%- assign next_index = current_index | plus: 1 -%}
{%- if prev_index >= 0 -%}
  {%- assign prev_essay = all_essays[prev_index] -%}
{%- endif -%}
{%- if next_index < all_essays.size -%}
  {%- assign next_essay = all_essays[next_index] -%}
{%- endif -%}

<!-- Essay Table of Contents Bar -->
<div class="essay-monograph-toc-bar">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center py-3">
      <div class="dropdown">
        <button class="btn btn-outline-primary dropdown-toggle" type="button" id="essayTocDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <svg class="bi me-2" width="18" height="18" fill="currentColor">
            <use xlink:href="{{ '/assets/lib/cb-icons.svg' | relative_url }}#book"/>
          </svg>
          Table of Contents
        </button>
        <ul class="dropdown-menu essay-monograph-toc-dropdown" aria-labelledby="essayTocDropdown">
          <li><h6 class="dropdown-header">Essays by {{ page.byline }}</h6></li>
          <li><hr class="dropdown-divider"></li>
          {%- for essay in all_essays -%}
          <li>
            <a class="dropdown-item{% if essay.url == page.url %} active{% endif %}" href="{{ essay.url | relative_url }}">
              <span class="essay-number">{{ essay.order }}</span>
              {{ essay.title }}
            </a>
          </li>
          {%- endfor -%}
        </ul>
      </div>

      {%- if site.data.theme.essay-monograph-reading-progress != false -%}
      <div class="essay-progress-indicator text-muted small">
        Essay {{ current_index | plus: 1 }} of {{ all_essays.size }}
      </div>
      {%- endif -%}
    </div>
  </div>
</div>

<!-- Main Essay Content -->
<div class="essay-monograph-container">
  <div class="container">
    <article class="essay-monograph-article">

      <!-- Decorative Header -->
      <div class="essay-monograph-header">
        {%- if page.order -%}
        <div class="essay-chapter-number">Essay {{ page.order }}</div>
        {%- endif -%}
        <h1 class="essay-monograph-title">{{ page.title }}</h1>
        {%- if page.byline -%}
        <div class="essay-byline">by {{ page.byline }}</div>
        {%- endif -%}
        <div class="essay-header-ornament">
          <span class="ornament-left"></span>
          <span class="ornament-center">❦</span>
          <span class="ornament-right"></span>
        </div>
      </div>

      <!-- Essay Content with Book Styling -->
      <div class="essay-monograph-content">
        {{ content }}
      </div>

      <!-- End Ornament -->
      <div class="essay-end-ornament">
        <span>✦ ✦ ✦</span>
      </div>

    </article>
  </div>
</div>

<!-- Chapter Navigation -->
<div class="essay-monograph-navigation">
  <div class="container">
    <div class="row align-items-center py-4">
      <div class="col-md-5 text-start">
        {%- if prev_essay -%}
        <a href="{{ prev_essay.url | relative_url }}" class="essay-nav-link prev-essay">
          <div class="nav-direction">
            <svg class="bi" width="16" height="16" fill="currentColor">
              <use xlink:href="{{ '/assets/lib/cb-icons.svg' | relative_url }}#arrow-left"/>
            </svg>
            Previous Essay
          </div>
          <div class="nav-title">{{ prev_essay.title }}</div>
        </a>
        {%- endif -%}
      </div>

      <div class="col-md-2 text-center">
        <a href="#" class="btn btn-sm btn-outline-secondary back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;">
          <svg class="bi" width="16" height="16" fill="currentColor">
            <use xlink:href="{{ '/assets/lib/cb-icons.svg' | relative_url }}#arrow-up"/>
          </svg>
        </a>
      </div>

      <div class="col-md-5 text-end">
        {%- if next_essay -%}
        <a href="{{ next_essay.url | relative_url }}" class="essay-nav-link next-essay">
          <div class="nav-direction">
            Next Essay
            <svg class="bi" width="16" height="16" fill="currentColor">
              <use xlink:href="{{ '/assets/lib/cb-icons.svg' | relative_url }}#arrow-right"/>
            </svg>
          </div>
          <div class="nav-title">{{ next_essay.title }}</div>
        </a>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<!-- Keyboard Navigation -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.addEventListener('keydown', function(e) {
    // Don't trigger if user is typing
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

    // Left arrow - previous essay
    if (e.key === 'ArrowLeft' && '{{ prev_essay.url }}') {
      window.location.href = '{{ prev_essay.url | relative_url }}';
    }
    // Right arrow - next essay
    if (e.key === 'ArrowRight' && '{{ next_essay.url }}') {
      window.location.href = '{{ next_essay.url | relative_url }}';
    }
  });
});
</script>
