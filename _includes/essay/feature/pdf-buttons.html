{% comment %}

    PDF Buttons
    Adds a button group with links to view the item page and optionally view transcript/translation.
    Displays in a Bootstrap btn-group with collapsible transcript/translation sections.

    E.G. --> {% include essay/feature/pdf-buttons.html %}
    (Note: This include relies on the 'item' variable being set by the parent include)

    Options (passed through from parent include):
    - "item" = collection item object with objectid (required, set by parent)

    Features:
    - Always includes "View Item Page" button linking to the item's full page
    - Adds "View Transcript" or "View Translation" button if item has object_transcript or object_translation fields
    - If object_transcript value starts with "/", looks for a page file at that path; otherwise renders the field value directly as Markdown
    - Supports side-by-side display of transcript and translation if both fields are present
    - All transcript/translation content is displayed in a collapsible Bootstrap card

{%- endcomment -%}
<div class="text-center my-3">
<div class="btn-group" role="group" aria-label="Item options">
    <a href="{{ item.objectid | prepend: '/items/' | append: '.html' | relative_url }}" class="btn btn-outline-primary">View Item Page</a>
    {% if item.object_transcript %}<button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTranscript" aria-expanded="false" aria-controls="collapseTranscript">View Transcript{% if item.object_translation %}/Translation{% endif %}</button>{% elsif item.object_translation %}
    <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTranscript" aria-expanded="false" aria-controls="collapseTranscript">View Translation</button>{% endif %}
</div>
{% if item.object_transcript %}
<div class="collapse mt-3 row" id="collapseTranscript">
    <div class="col">
    <div class="card card-body text-start">
        {% assign transcript_type = item.object_transcript | slice: 0,1 %}
        {% if transcript_type == '/' %}
        {% assign transcript_location = item.object_transcript | remove_first: '/' %}
        {% assign transcript = site.pages | where: 'path', transcript_location | first %}
        {{ transcript.content | markdownify }}
        {% else %}
        {{ item.object_transcript | markdownify }}
        {% endif %}
    </div>
</div>{% if item.object_translation %}
<div class="col">
    <div class="card card-body text-start">
        {% assign transcript_type = item.object_translation | slice: 0,1 %}
        {% if transcript_type == '/' %}
        {% assign transcript_location = item.object_translation | remove_first: '/' %}
        {% assign transcript = site.pages | where: 'path', transcript_location | first %}
        {{ transcript.content | markdownify }}
        {% else %}
        {{ item.object_translation | markdownify }}
        {% endif %}
    </div>
</div>{% endif %}
</div>
{% elsif item.object_translation %}
<div class="collapse mt-3" id="collapseTranscript">
    <div class="card card-body text-start">
        {% assign transcript_type = item.object_translation | slice: 0,1 %}
        {% if transcript_type == '/' %}
        {% assign transcript_location = item.object_translation | remove_first: '/' %}
        {% assign transcript = site.pages | where: 'path', transcript_location | first %}
        {{ transcript.content | markdownify }}
        {% else %}
        {{ item.object_translation | markdownify }}
        {% endif %}
    </div>
</div>
{% endif %} 
</div>